<div class="container">
	<div class="row">
		<h3>Media:</h3>
		<div class="column">
			<table class="table">
				<tbody ng:repeat="medium in media">
				<tr>
					<td ng:click="selectMedium(medium)">
						<img ng:src="{{ medium.image_video_thumb_url }}" alt="{{ medium.text }}" /><br>
					</td>
					<td>
						<% if current_user.id == medium.user_id %>
						<%= link_to 'Delete', medium_path(medium), method: :delete, data: { confirm: 'Are you sure?' } %>
						<% end %>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<form ng-submit="$flow.upload()"
      ng-controller="MediumNewCtrl"
      flow-init="{target: '/upload'}" >

	<input type="file" flow-btn flow-attrs="{accept: 'image/*'}"/>

	<span class="btn button-xs" flow-btn flow-attrs="{accept: 'image/*'}">Choose file</span>
	<button ng-click="upload($flow.files)" class="button-xs">Upload</button>

	<div class="thumbnail" ng-show="$flow.files.length">
		<img flow-img="$flow.files[0]" />
	</div>

	<table>
		<tr ng-repeat="file in $flow.files">
			<td>{{$index+1}}</td>
			<td>{{file.name}}</td>
			<td>{{file.msg}}</td>
		</tr>
	</table>
</form>

